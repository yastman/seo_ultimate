# ТЗ: Исправление ошибок миграции — Раунд 2

**Дата:** 2026-01-05
**Статус:** Ожидает исполнения
**Исполнитель:** Агент/Subagent
**Проверяющий:** Оркестратор

---

## Цель

Исправить 4 критические ошибки размещения ключей, обнаруженные при ручной проверке структуры.

---

## Источник данных

**CSV:** `Структура _Ultimate.csv`
**MD:** `data/STRUCTURE.md` (для проверки после исправления)

---

## ❌ Критические ошибки (исправить обязательно)

### 1. Полировальные круги в "Очистители кузова"

**Где сейчас:** L1: Мойка и Экстерьер → L2: Очистители кузова → General (строки 354-389 в STRUCTURE.md)

**Куда перенести:** L1: Полировка → L2: Полировальные круги → General

**Ключи для переноса (28 шт, ~2880 vol):**

| Ключ                                         | Vol |
| -------------------------------------------- | --- |
| круг для полировки авто                      | 720 |
| круги для полировки автомобиля               | 590 |
| круги для полировки                          | 480 |
| полировальные круги                          | 390 |
| круги для полировальной машины               | 90  |
| купить круг для полировки авто               | 70  |
| купить круг для полировки автомобиля         | 70  |
| полировальные круги для автомобиля           | 40  |
| круги для полировальной машинки              | 40  |
| круг полировальный на липучке                | 40  |
| полировальные круги для полировки автомобиля | 40  |
| купить полировальные круги                   | 30  |
| купить полировальный круг для авто           | 30  |
| полировальные круги для авто                 | 30  |
| круг для полировки кузова                    | 30  |
| купить полировальный круг в украине          | 30  |
| купить круг для полировки                    | 20  |
| полировочные круги                           | 10  |
| круг для полировки авто цена                 | 10  |
| полировочный круг для машины                 | 10  |
| круги для полировки машины                   | 10  |
| полировальные круги для полировки авто       | 10  |
| купить в украине круги для полировки         | 10  |
| круг для полировки на машинку                | 10  |
| полировочные круги на липучке                | 10  |
| круги на полировочную машинку                | 10  |
| полировочные круги для авто                  | 10  |
| поролоновый круг для полировки купить        | 10  |
| диск полировочный                            | 10  |
| диск для полировки авто                      | 10  |
| диск для полировки автомобиля                | 10  |
| полировальные круги для авто цена            | 0   |

---

### 2. Средства для кожи в "Полировальные круги"

**Где сейчас:** L1: Полировка → L2: Полировальные круги → General (строки 982-988)

**Куда перенести:** L1: Уход за интерьером → L2: Средства для кожи → General

**Ключи для переноса (3 шт, ~50 vol):**

| Ключ                         | Vol |
| ---------------------------- | --- |
| средство для кожи            | 30  |
| средство для кожаного салона | 10  |
| автокосметика для кожи       | 10  |

---

### 3. Воски в "Полировальные круги"

**Где сейчас:** L1: Полировка → L2: Полировальные круги → General (строки 990-1004)

**Куда перенести:** L1: Защитные покрытия → L2: Воски → General

**Ключи для переноса (11 шт, ~2840 vol):**

| Ключ                           | Vol  |
| ------------------------------ | ---- |
| воск для авто                  | 1600 |
| купить воск для авто           | 320  |
| купить воск для автомобиля     | 320  |
| воск для машины                | 210  |
| воск для полировки авто        | 90   |
| воск автомобильный             | 90   |
| воск для мойки авто            | 70   |
| воск для кузова авто           | 50   |
| восковый полироль для авто     | 50   |
| купить воск для полировки авто | 20   |
| купить воск для мойки авто     | 20   |

---

### 4. Защитные покрытия в "Полировальные круги"

**Где сейчас:** L1: Полировка → L2: Полировальные круги → General (строки 1006-1014)

**Куда перенести:** L1: Защитные покрытия → Direct Keywords (или General)

**Ключи для переноса (5 шт, ~110 vol):**

| Ключ                               | Vol |
| ---------------------------------- | --- |
| защитные покрытия для авто         | 70  |
| защитные покрытия автомобиля       | 10  |
| покрытие для автомобиля            | 10  |
| защитное покрытие на машину купить | 10  |
| купить защитное покрытие для авто  | 10  |

---

## ⚠️ Средний приоритет (желательно исправить)

### 5. B2B ключ в Tornador

**Где сейчас:** L1: Защитные покрытия → L2: Оборудование → L3: Аппараты Tornador (строка 1338)

**Куда перенести:** Special: Опт и B2B

**Ключ:**

| Ключ                            | Vol |
| ------------------------------- | --- |
| производители автохимии украина | 10  |

---

## Алгоритм исправления

1. Открыть `Структура _Ultimate.csv`
2. Найти каждый ключ из таблиц выше
3. Изменить значения колонок L1/L2/L3/Cluster на правильные
4. Сохранить CSV
5. Запустить `python scripts/csv_to_readable_md.py` для обновления STRUCTURE.md
6. Проверить результат

---

## Критерии приёмки

-   [ ] Все 28 ключей "полировальные круги" перенесены из Очистителей кузова в Полировку
-   [ ] Все 3 ключа "средства для кожи" перенесены из Полировки в Уход за интерьером
-   [ ] Все 11 ключей "воски" перенесены из Полировки в Защитные покрытия
-   [ ] Все 5 ключей "защитные покрытия" перенесены в L1: Защитные покрытия
-   [ ] B2B ключ перенесён в Special: Опт и B2B
-   [ ] STRUCTURE.md обновлён и отражает изменения
-   [ ] Дублей в CSV нет (проверить сводку)

---

## Сводка переносов

| Откуда                  | Куда                    | Ключей | Volume     |
| ----------------------- | ----------------------- | ------ | ---------- |
| L2: Очистители кузова   | L2: Полировальные круги | 28     | ~2,880     |
| L2: Полировальные круги | L2: Средства для кожи   | 3      | ~50        |
| L2: Полировальные круги | L2: Воски               | 11     | ~2,840     |
| L2: Полировальные круги | L1: Защитные покрытия   | 5      | ~110       |
| L3: Tornador            | Special: Опт и B2B      | 1      | ~10        |
| **ИТОГО**               |                         | **48** | **~5,890** |

---

## После выполнения

1. Исполнитель обновляет CSV и STRUCTURE.md
2. Оркестратор делает повторный spot-check
3. После утверждения — Этап 2 закрыт, переход к Этапу 3
