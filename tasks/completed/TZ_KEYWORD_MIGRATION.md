# ТЗ: Детальный аудит кластеров — полный реестр перемещений

**Дата:** 2026-01-05
**Статус:** Ожидает исполнения
**Исполнитель:** Агент/Subagent
**Проверяющий:** Оркестратор

---

## Цель

Создать исчерпывающий список ВСЕХ ключей, которые нужно перенести из одного кластера в другой.

---

## Выходной артефакт

**Файл:** `tasks/reports/KEYWORD_MIGRATION_REGISTRY.md`

---

## Задача

Пройти по КАЖДОМУ из 48 кластеров в `data/STRUCTURE.md` и для каждого проверить:

### Чеклист проверки кластера

-   [ ] Все ли ключи соответствуют названию кластера?
-   [ ] Нет ли ключей с другим интентом? (B2B, опт, другой товар)
-   [ ] Нет ли ключей другого уровня? (L1 в L3, общие в специфичных)
-   [ ] Нет ли ключей другой категории? (шины в двигателе, кожа в мойке)

---

## Формат записи

Для КАЖДОГО проблемного ключа выписать строку в таблицу:

| Ключ                         | Vol  | Откуда (Source)        | Куда (Target)                          | Тип ошибки            |
| ---------------------------- | ---- | ---------------------- | -------------------------------------- | --------------------- |
| полировочная машинка         | 8100 | Filter: Аккумуляторная | L2: Полировальные машинки (General)    | False Positive Filter |
| автошампунь для ручной мойки | 390  | L3: Активная пена      | L3: Шампуни для ручной мойки (создать) | Wrong Product         |

---

## Известные проблемы (начать с них)

### 1. Filter: Аккумуляторная

**Проблема:** Фильтр слишком жадный — забирает общие ключи полировки.

**Что искать:** Все ключи БЕЗ слов "аккумулятор", "на аккумуляторе", "аккумуляторная".

**Куда переносить:** L2: Полировальные машинки (General)

---

### 2. L3: Активная пена

**Проблема:** Смешаны бесконтактная мойка и ручная мойка.

**Что искать:** Все ключи со словами "ручной мойки", "для ручной".

**Куда переносить:** L3: Шампуни для ручной мойки (создать новый кластер)

---

### 3. L3: Аппараты Tornador

**Проблема:** Мусорная свалка — B2B, оборудование, полировка.

**Что искать:**

-   B2B: "опт", "поставщики", "производство", "от производителя"
-   Оборудование: "оборудование для моек", "оборудование для химчистки"
-   Полировка: "диски для полировки"

**Куда переносить:**

-   B2B → Special: Опт и B2B (создать)
-   Оборудование → L2: Оборудование (создать)
-   Полировка → L2: Полировальные круги

---

### 4. Cluster: General (Средства для кожи)

**Проблема:** Ключи общей химчистки салона в узкой категории "Кожа".

**Что искать:** "химчистка салона", "для химчистки", "жидкость для химчистки".

**Куда переносить:** L2: Очистители салона (Универсальные) — создать

---

### 5. L2: Очистители двигателя (Direct Keywords)

**Проблема:** Попали полироли для наружного пластика.

**Что искать:** "полироль для наружного пластика", "полироль для пластика".

**Куда переносить:** L3: Чернители наружного пластика (в Экстерьере)

---

### 6. L3: Очистители шин

**Проблема:** Попали ключи защиты дисков.

**Что искать:** "защитное покрытие для дисков", "защита дисков".

**Куда переносить:** L3: Керамика для дисков или L3: Силанты

---

### 7. L3: Наборы для мойки

**Проблема:** Смешаны наборы разных типов.

**Что искать:**

-   "набор для ухода за кожей" → L3: Наборы для салона
-   "набор кругов для полировки" → L3: Наборы для полировки
-   "набор паст для полировки" → L3: Наборы для полировки

**Куда переносить:** Соответствующие L3 кластеры

---

### 8. L3: Кисти для детейлинга

**Проблема:** Попали щётки для дисков.

**Что искать:** "щетка для дисков", "щетка для мытья дисков".

**Куда переносить:** L2: Щетки и кисти (General) или создать L3: Щетки для дисков

---

## Требования к отчёту

1. **Полнота:** КАЖДЫЙ проблемный ключ должен быть в таблице
2. **Точность:** Указать точное название Source и Target кластера
3. **Volume:** Обязательно указать объём для приоритизации
4. **Новые кластеры:** Если Target не существует — пометить "(создать)"

---

## Критерии приёмки

-   [ ] Проверены все 48 кластеров
-   [ ] Каждый проблемный ключ записан в таблицу
-   [ ] Указаны точные Source и Target
-   [ ] Указан Volume для каждого ключа
-   [ ] Помечены кластеры, которые нужно создать

---

## После выполнения

1. Исполнитель создаёт `tasks/reports/KEYWORD_MIGRATION_REGISTRY.md`
2. Оркестратор проверяет полноту
3. После утверждения — переход к Этапу 3 (Структура CSV)
