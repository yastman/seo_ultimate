---
name: seo-research
description: >-
  Генерирует контекстный промпт для Perplexity Deep Research на основе семантики категории
  и обобщённых характеристик товаров. Анализирует _clean.json и PRODUCTS_LIST.md, извлекает
  типы форм/баз/эффектов, создаёт RESEARCH_PROMPT.md. Use when you see /seo-research,
  исследуй категорию, собери данные, ресёрч для категории, подготовь промпт для ресёрча.
---

# SEO Research для Ultimate.net.ua

Генерация **контекстного промпта** для Perplexity Research на основе обобщённых характеристик товаров.

**Ключевой принцип:** Пишем контент для КАТЕГОРИИ, не для конкретных товаров. Из описаний извлекаем обобщённые характеристики типов продуктов.

---

## Подход

| Неправильно | Правильно |
|-------------|-----------|
| Перечислять конкретные SKU | Описывать типы продуктов |
| "Ultimate Slick Black 500 мл" | "гели для чернения" |
| Привязка к брендам | Обобщённые характеристики |
| Список товаров в промпте | Типы форм/эффектов/применений |

**Из описаний товаров извлекаем:**
- Типы форм: гель, спрей, лосьон, концентрат
- Типы баз: водная, силиконовая, растворитель
- Типы эффектов: матовый, глянцевый, сатиновый
- Диапазон объёмов: 250мл — 20л
- Пропорции разведения: 1:5, 1:10, 1:100
- Применения: универсальные, специализированные, 2-в-1

---

## Workflow

```
/seo-research {slug}
│
├─► 1. Прочитать _clean.json → keywords, entities, micro_intents
├─► 2. Найти товары в PRODUCTS_LIST.md по category_id
├─► 3. Извлечь ОБОБЩЁННЫЕ характеристики из описаний
├─► 4. Сгенерировать RESEARCH_PROMPT.md
├─► 5. (Опционально) Создать каркас RESEARCH_DATA.md
└─► 6. Сообщить пользователю что промпт готов
```

---

## Шаг 1: Читаем данные категории

**Файл:** `categories/{slug}/data/{slug}_clean.json`

Извлекаем:
- `name` — название категории
- `keywords` — ключевые слова с объёмами
- `entities` — связанные сущности
- `micro_intents` — вопросы пользователей
- `parent_id` — родительская категория

---

## Шаг 2: Находим товары категории

**Файл:** `data/generated/PRODUCTS_LIST.md`

ВАЖНО: `PRODUCTS_LIST.md` сгруппирован по **UK-названиям** и **ID** (`## ... (ID: NNN)`), поэтому поиск по RU `name` из `_clean.json` часто не сработает.

### 2.1 Как получить `category_id` для slug

Приоритет (источник правды → запасной вариант):

1. `scripts/upload_to_db.py` → `CATEGORY_IDS["{slug}"]`
2. `deploy/{slug}.sql` (или `deploy/{slug}_update.sql`) → строка вида `-- Deploy: {slug} (category_id=NNN)`

### 2.2 Как найти секцию в `PRODUCTS_LIST.md`

Искать заголовок:

- `## ... (ID: {category_id})`

Если `category_id` не найден (редко):
- искать по UK-названию категории (если оно известно),
- или по релевантным словам/синонимам из `entities` и `micro_intents` (как fallback, затем вручную подтвердить, что это нужная категория).

---

## Шаг 3: Извлекаем ОБОБЩЁННЫЕ характеристики

Анализируем ВСЕ описания товаров категории и составляем сводку:

| Что извлекаем | Примеры |
|---------------|---------|
| **Формы выпуска** | гель, спрей, лосьон, паста, концентрат |
| **Объёмы** | 250мл, 500мл, 1л, 5л, 20л |
| **База** | водная, силиконовая, растворитель |
| **Эффекты** | матовый, глянцевый, сатиновый |
| **pH / тип** | кислотный, щелочной, нейтральный |
| **Пропорции** | готовый к применению, 1:5, 1:10, 1:100 |
| **Применения** | универсальные, специализированные, 2-в-1 |

**НЕ перечисляем конкретные товары и бренды!** Только обобщённые типы.

---

## Шаг 4: Генерируем RESEARCH_PROMPT.md

**Создаём файл:** `categories/{slug}/research/RESEARCH_PROMPT.md`

### Шаблон:

```markdown
# Research Prompt: {Название категории} ({slug})

## Контекст

- **Тип контента:** страница категории интернет-магазина автохимии
- **Категория:** {name}
- **Parent:** {parent_id}
- **Тип продуктов:** {автохимия / аксессуары / расходники}

## Ключевые слова (из семантики)

| Ключ | Объём |
|------|-------|
| {keyword} | {volume} |
...

**Entities:** {список entities}

**Вопросы пользователей:**
- {micro_intent_1}
- {micro_intent_2}
...

## Типы продуктов в категории

(Обобщение из описаний товаров)

| Характеристика | Варианты в категории |
|----------------|---------------------|
| Формы выпуска | {гель, спрей, лосьон...} |
| Объёмы | {диапазон} |
| База | {водная, силиконовая, растворитель} |
| Эффекты | {матовый, глянцевый, сатиновый} |
| pH / тип | {кислотный, щелочной, нейтральный} |
| Разведение | {готовый, 1:5, 1:10...} |

---

## Промпт для Perplexity

Исследуй категорию **{Название категории} ({EN название})** для интернет-магазина автохимии.

### Контекст
Это страница категории интернет-магазина. В категории представлены:
- Формы: {обобщённый список форм}
- Базы: {водная, силиконовая, растворитель}
- Эффекты: {если применимо}
- Объёмы: от {min} до {max}

### Что нужно узнать

#### 1. Базовые факты
| Параметр | Ответ |
|----------|-------|
| Что это | определение категории в 1-2 предложения |
| Назначение | какие проблемы решает |
| Классификация по базе | водная vs силикон vs растворитель — плюсы/минусы |
| Классификация по форме | гель vs спрей vs лосьон — влияние на расход/стойкость |

#### 2. Практические данные
| Параметр | Значение |
|----------|----------|
| Расход | **диапазон** с условиями (размер, метод, слои) |
| Разведение | если концентрат — пропорции для разных задач |
| Время выдержки | минуты |
| Стойкость | дни/недели/количество моек |
| Температура | рабочий диапазон °C |

#### 3. Как выбрать
- По желаемому результату
- По типу поверхности
- По способу нанесения

#### 4. Как применять
1. Подготовка (нужно ли мыть, обезжиривать?)
2. Нанесение (чем, как, на мокрую/сухую?)
3. Время выдержки
4. Финиш (располировка, смыв)

#### 5. Типичные ошибки
| Ошибка | Последствие | Как избежать |
|--------|-------------|--------------|

#### 6. Известные проблемы категории
- {Специфичные проблемы для данной категории}

#### 7. Экспертные инсайты
- Лайфхаки от детейлеров
- Что отличает профи от новичков
- Малоизвестные факты

#### 8. Меры предосторожности
- PPE (перчатки, очки)
- На чём НЕЛЬЗЯ использовать
- Хранение

---

### Требования к ответу

**Формат каждого пункта:**
1. Факт/утверждение
2. Число или диапазон + от чего зависит
3. Источник (URL) + цитата или таймкод для YouTube

**Честность:** Если точных данных нет — так и напиши. Не оценивай "на глаз". Дай диапазон + факторы.

**Бренды:** В ресёрче можно упоминать любые бренды для сравнения. В финальных выводах для текста — бренды НЕ упоминать.

**Приоритет источников:**
1. Manufacturer TDS/SDS (техническая документация)
2. Профессиональные гайды (детейлинг школы)
3. Форумы (Autopia, Detailing World) — как доп. опыт
4. YouTube обзоры — с таймкодами

**Без:** общих фраз, цен.

---

**Дата генерации:** {YYYY-MM-DD}
```

---

## Шаг 5 (опционально): Создаём каркас RESEARCH_DATA.md

**Создаём файл:** `categories/{slug}/research/RESEARCH_DATA.md`

Минимальный каркас (чтобы результаты Perplexity складывались одинаково и с источниками):

```markdown
# Research: {Название категории} ({slug})

## Sources (raw list)
- {URL} — {что подтверждает} — {цитата/таймкод}

## Notes
- {неуверенные места / что нужно перепроверить}

## Extracted facts (ready for content)
| Тезис | Цифры/диапазон | Условия/допущения | Источник |
|------:|----------------|-------------------|----------|
```

---

## Шаг 6: Сообщаем пользователю

```
✅ RESEARCH_PROMPT.md создан: categories/{slug}/research/RESEARCH_PROMPT.md

Следующие шаги:
1. Открой файл и скопируй секцию "Промпт для Perplexity"
2. Вставь в Perplexity → Deep Research
3. Результаты сохрани в RESEARCH_DATA.md
```

---

## Матрица по типу категории

Полная матрица с обязательными блоками, примерами и чеклистом качества — в [REFERENCE.md](REFERENCE.md).

Типы категорий:
- **Автохимия** — pH, база, формы, пропорции, температура, совместимость
- **Защитные покрытия** — стойкость, подготовка, условия нанесения, слои
- **Инструменты** — материалы, размеры, резьба, ресурс
- **Расходники** — GSM, плетение, уход
- **Полировка** — абразивность, обороты, совместимость круг-паста

---

## Output

```
categories/{slug}/research/
└── RESEARCH_PROMPT.md   # Промпт с обобщёнными характеристиками
└── RESEARCH_DATA.md     # (опционально) Склад результатов с источниками

Status: ready for manual Perplexity research
```

---

**Version:** 7.0 — January 2026
