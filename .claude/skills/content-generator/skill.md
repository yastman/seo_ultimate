---
name: content-generator
description: >-
  Генерирует SEO-контент (buyer guide) для категорий Ultimate.net.ua.
  Без ссылок/цитат. Спорные утверждения смягчать. Research — справка.
  Use when: /content-generator, напиши текст, сгенерируй контент, создай контент,
  напиши описание категории. ВАЖНО: использовать ПОСЛЕ /seo-research.
---

# Content Generator v4.0

## Quick Start

```
/content-generator {slug}
```

**Input:** `_clean.json` + `_meta.json` + research/*.md
**Output:** `categories/{slug}/content/{slug}_ru.md`

---

## Decision Tree

```
1. Read _clean.json → parent_id?
   │
   ├─ null → L1 HUB PAGE → references/hub-pages.md
   │
   └─ not null → проверить дочерние категории
                 │
                 ├─ есть дочерние L3 → L2 MINI-HUB → references/hub-pages.md
                 │
                 └─ нет дочерних → BUYER GUIDE (ниже)

2. Проверка дочерних:
   → Открыть tasks/reports/STRUCTURE_TREE.md
   → Найти slug в дереве
   → Если есть вложенные L3 → это мини-хаб

3. Write content → по типу страницы

4. Validate:
   check_keyword_density.py → stem ≤2.5%
   check_water_natasha.py  → тошнота ≤3.5, вода 40-65%
   validate_content.py     → --mode seo
```

---

## Коммерческий интент — ГЛАВНЫЙ ПРИОРИТЕТ

Контент = **помощь в выборе**, НЕ образовательная статья.

### Тест каждой секции (ОБЯЗАТЕЛЬНО)

Перед написанием H2 спроси: **"Эта секция помогает ВЫБРАТЬ товар или ИСПОЛЬЗОВАТЬ его?"**
- Выбрать → оставляем
- Использовать → удаляем или переформулируем

| ✅ Про выбор | ❌ Про использование |
|--------------|----------------------|
| "Как выбрать по типу лака" | "Как работать с пастой" |
| "Чего избегать при выборе" | "Ошибки при работе" |
| "Какую пасту для задачи X" | "Паста + круг: комбинации" |
| FAQ "какую выбрать" | FAQ "как применять" |

### Блокеры — НЕ включать в текст

| ❌ Блокер | Почему |
|-----------|--------|
| Секция про работу с инструментом | How-to ≠ выбор |
| "Товар + аксессуар: комбинации" | Выбор аксессуара ≠ выбор товара |
| "Ошибки при работе/применении" | Инструкция после покупки |
| "Как наносить/применять" 5+ шагов | Информационный интент |
| Cross-sell связки (товар + химия) | Это для страницы товара |

### Обязательные элементы

1. **H1** = множественное число (категория = список товаров)
2. **Первый H2** = "Как выбрать" / "Сценарии"
3. **Таблица** = Задача → Тип → Почему (3 колонки!)
4. **Паттерн "Если X → Y"** — минимум 3 раза
5. **Итог — что покупать** — рекомендации по сценариям

### Читабельность

- **Max 2-3 таблицы** на весь текст (иначе — справочник, не гид)
- Между таблицами — текстовые блоки «Если X → Y»
- Дублирующие таблицы объединять или убирать

**Подробнее:** См. [references/buyer-guide.md](references/buyer-guide.md)

---

## Параметры Buyer Guide (L3)

| Параметр | Значение | Примечание |
|----------|----------|------------|
| **Объём** | 500-700 слов | НЕ больше! Риск "стены текста" |
| **Intro** | 40-60 слов | Над сеткой товаров |
| **Body** | 300-450 слов | Под сеткой товаров |
| **FAQ** | 100-150 слов | 3-4 вопроса из micro_intents |
| **Таблицы** | Max 2-3 | Больше = справочник, не гид |
| **"Если X → Y"** | Min 3 раза | Рассеять по тексту |

**Почему не 800-1200 слов?**
- Helpful Content System (Dec 2024+) бьёт по "стенам SEO-текста"
- Mobile First: 1000 слов = бесконечный скролл
- Размытие транзакционного интента

---

## Структура Buyer Guide

```markdown
# {name — МНОЖЕСТВЕННОЕ ЧИСЛО, БЕЗ "Купить"}

{Intro 40-60 слов: что + зачем + ключевой критерий выбора}

## Как выбрать: сценарии

| Задача/Состояние | Что брать | Почему |
|------------------|-----------|--------|
| {Сценарий 1} | {Тип A} | {Выгода для покупателя} |

**Если X** → выбирай Y
**Если Z** → бери W

## На что смотреть при выборе

| Параметр | Что означает для покупателя |
|----------|------------------------------|

## Выбор по {ключевой критерий} *(опционально)*

| {Критерий} | Что подходит | Почему |
|------------|--------------|--------|

**Если {условие A}** → рекомендация
**Если {условие B}** → рекомендация

## Чего избегать при выборе *(опционально)*

**Если {ошибка выбора}** → почему плохо + что брать вместо

## FAQ *(только про выбор!)*

### {micro_intent: какую/какой выбрать}?
{Ответ 2-3 предложения с рекомендацией}

---

**Итог — что покупать:**
- **{Сценарий 1}** → {тип товара}
- **{Сценарий 2}** → {тип товара}
```

**Шаблоны по типам:** См. [references/templates.md](references/templates.md)

---

## Распределение ключей

| Источник | Где | Раз |
|----------|-----|-----|
| `keywords[0]` (primary) | H1, intro, текст | 2-3 |
| `keywords[1-2]` | H2, первый абзац | 1 |
| `keywords[3+]` | Таблицы, FAQ | 1 |
| `synonyms` (без meta_only) | По тексту | 1-2 |
| `entities` | Таблицы, FAQ | 3-4 |
| `micro_intents` | **H3 в FAQ** | все |

---

## First-hand Experience (E-E-A-T)

**Цифры вместо прилагательных** — защита от AI-детекта и сигнал экспертности.

| ❌ Прилагательное | ✅ Цифра/факт |
|-------------------|---------------|
| "экономный расход" | "расход 50 мл на авто" |
| "быстро сохнет" | "высыхание за 15 минут" |
| "эффективно удаляет" | "убирает за один проход" |

**Правило:** Увидел "эффективный/качественный/надёжный"? Замени на цифру из RESEARCH_DATA.md или удали.

---

## Entity Salience (смысл > частота)

Фокус на **профессиональных терминах** (entities), а не на плотности ключей.

| Категория | Entities для использования |
|-----------|---------------------------|
| Полировка | DA, ротор, Open Cell, HDO, голограммы |
| Защита | SiO₂, гидрофобность, контактный угол |
| Моющие | pH, разведение, dwell time |
| Шины | sling, антиозонанты, UV-деградация |

**Правило:** 3-4 термина из `_clean.json → entities` распределить по тексту (1 раз каждый).

### ⚠️ АНТИПАТТЕРН: Entities в каждой ячейке

```markdown
❌ ПЛОХО (переспам "очиститель"):
| Задача | Что брать |
|--------|-----------|
| Ткань | Очиститель ткани |
| Потолок | Очиститель потолка |
| Сиденья | Очиститель сидений |
| Алькантара | Очиститель Алькантары |

✅ ХОРОШО (синонимы):
| Задача | Что брать |
|--------|-----------|
| Ткань | Универсальный состав |
| Потолок | Пенный продукт |
| Сиденья | Химия для интерьера |
| Алькантара | Спрей без спирта |
```

**Entities ≠ копипаст.** Entities — профессиональные термины для E-E-A-T, не слова для повторения в таблицах.

---

## Запреты

### Не вставлять в текст

- Ссылки, цитаты, [1][2]
- Проценты ("56% детейлеров...")
- Бренды в примерах
- Пустые прилагательные (эффективный, качественный, надёжный)

### Спорные темы → смягчить

| ❌ Было | ✅ Стало |
|--------|---------|
| "Силикон сушит резину" | "Может влиять на эластичность" |
| "Повредит датчики" | "Избегать зоны датчиков" |

### Не включать (БЛОКЕРЫ)

- Секция "Как применять/наносить/работать" → это how-to
- Секция "Товар + аксессуар: комбинации" → это cross-sell
- Секция "Ошибки при работе" → это инструкция
- Теория "как это работает" → информационный интент
- История продукта/технологии → не помогает выбрать

---

## Self-Check (ПЕРЕД валидацией)

После написания, ДО запуска скриптов — проверь вручную:

```
□ Объём 500-700 слов? (wc -w)
□ Таблиц ≤3? (пересчитай: |---|)
□ "Если X → Y" ≥3 раза?
□ Одно слово не повторяется в каждой строке таблицы?
□ Нет секции "Как применять/наносить"?
```

**Если таблиц >3** → объедини или замени на текстовые блоки "Если → То".

**Если одно слово в каждой строке** → замени на синонимы из `lsi-synonyms.md`.

---

## Контроль метрик

| Метрика | Цель | Блокер |
|---------|------|--------|
| Stem-группа | ≤2.5% | >3.0% |
| Тошнота | ≤3.5 | >4.0 |
| Вода | 40-65% | >75% |

### Как исправить переспам

1. Определить виновника (`check_keyword_density.py`)
2. Если НЕ целевой ключ → заменить на синонимы
3. Если целевой → добавить LSI-слова (увеличить общий объём)

**Синонимы:** См. [references/lsi-synonyms.md](references/lsi-synonyms.md)

### Как снизить воду

Заменить разговорный стиль на безличные конструкции:

| ❌ Высокая вода | ✅ Оптимально |
|-----------------|---------------|
| "Вам нужен" | "Для задачи X —" |
| "Если вы работаете" | "При работе с" |

---

## Локализация терминов

RU-first, англ. в скобках при первом упоминании:

- ✅ разбрызгивание (sling)
- ❌ sling (разбрызгивание)

---

## Валидация

```bash
python3 scripts/validate_content.py categories/{slug}/content/{slug}_ru.md "{primary_keyword}" --mode seo
```

**Checklist:** См. [references/validation.md](references/validation.md)

---

## Output

```
✅ Content: categories/{slug}/content/{slug}_ru.md
✅ Validated: python3 scripts/validate_content.py ... --mode seo

Следующий шаг: /uk-content-init {slug}
```

---

## Hub Pages (краткий обзор)

Для Hub Pages (L1 и L2 с дочерними) применяются **другие** параметры:

| Параметр | Hub Page (L1/L2) | Buyer Guide (L3) |
|----------|------------------|------------------|
| Объём | 400-500 слов | **500-700 слов** |
| Структура | Lead + Body + FAQ | Intro + Сценарии + Параметры + FAQ |
| Интент | Навигационный | Коммерческий |
| Принцип | Проблема → Решение (ссылка) | Краткий гид по выбору |

**Подробнее:** См. [references/hub-pages.md](references/hub-pages.md)

---

**Version:** 4.0 — January 2026
- **КРИТИЧНОЕ:** Buyer Guide L3 снижен до 500-700 слов (Helpful Content System 2025-2026)
- Добавлена секция "Параметры Buyer Guide (L3)" с обоснованием объёма
- Hub Pages: 400-500 слов
- Intro увеличен до 40-60 слов
- Убрано устаревшее "800-1200 слов"
