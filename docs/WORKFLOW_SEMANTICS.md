# –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –Ø–¥—Ä–æ –∏ –ü–∞—Ä—Å–∏–Ω–≥ –°—Ç—Ä—É–∫—Ç—É—Ä—ã

> **–ò—Å—Ç–æ—á–Ω–∏–∫ –ü—Ä–∞–≤–¥—ã**: –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö ‚Äî —Ñ–∞–π–ª [`–°—Ç—Ä—É–∫—Ç—É—Ä–∞ _Ultimate.csv`](../–°—Ç—Ä—É–∫—Ç—É—Ä–∞%20_Ultimate.csv).

JSON —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ (`_clean.json`) –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å CSV. –í—Å–µ–≥–¥–∞ –æ–ø–∏—Ä–∞–π—Ç–µ—Å—å –Ω–∞ CSV.

---

## üõ†Ô∏è –í–æ—Ä–∫—Ñ–ª–æ—É —Ä–∞–±–æ—Ç—ã

### 1. –í–Ω–µ—Å–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ (–Ω–æ–≤—ã–µ –∫–ª—é—á–∏, —É–¥–∞–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π, –Ω–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏) –¥–µ–ª–∞—é—Ç—Å—è **–¢–û–õ–¨–ö–û** –≤ —Ñ–∞–π–ª–µ `–°—Ç—Ä—É–∫—Ç—É—Ä–∞ _Ultimate.csv`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Excel –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä.

### 2. –ß–∏—Å—Ç–∫–∞ –∏ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (Auto)

–ï—Å–ª–∏ –≤—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–ª–∏ CSV –≤—Ä—É—á–Ω—É—é –∏ –º–æ–≥–ª–∏ –Ω–∞—Ä—É—à–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç (–Ω–∞–ø—Ä. —Å–æ–∑–¥–∞–ª–∏ "–ª–æ–∂–Ω—ã–µ" –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏–∑ –º–∞–ª–µ–Ω—å–∫–∏—Ö –≥—Ä—É–ø–ø –∫–ª—é—á–µ–π), –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —á–∏—Å—Ç–∫–∏.

```bash
python3 scripts/fix_csv_structure.py
```

-   **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**: –ù–∞—Ö–æ–¥–∏—Ç —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ –≤–æ 2-–π –∫–æ–ª–æ–Ω–∫–µ —á–∏—Å–ª–æ 1-4 (–∫–æ—Ç–æ—Ä–æ–µ –ø–∞—Ä—Å–µ—Ä –º–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å –∑–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫–ª–∞—Å—Ç–µ—Ä–∞), –∏ —É–±–∏—Ä–∞–µ—Ç –µ–≥–æ, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ —è–≤–Ω—ã–π –º–∞—Ä–∫–µ—Ä (L1-L3, Filter).
-   **–ë—ç–∫–∞–ø**: –°–æ–∑–¥–∞–µ—Ç `–°—Ç—Ä—É–∫—Ç—É—Ä–∞ _Ultimate_backup.csv` –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º.

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –û—Ç—á–µ—Ç–∞ –∏ –í–∞–ª–∏–¥–∞—Ü–∏—è

–ü–æ—Å–ª–µ –ø—Ä–∞–≤–æ–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç—á–µ—Ç–∞. –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Ç–∞–∫–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å—Ç—Ä–æ–≥—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö.

```bash
python3 scripts/csv_to_readable_md.py
```

-   **Input**: `–°—Ç—Ä—É–∫—Ç—É—Ä–∞ _Ultimate.csv`
-   **Output**: [`data/STRUCTURE.md`](../data/STRUCTURE.md)
-   **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∫–æ–ª-–≤–æ —Å—Ç—Ä–æ–∫ —Å –∫–ª—é—á–∞–º–∏ –≤ CSV –∏ –∫–æ–ª-–≤–æ –∫–ª—é—á–µ–π –≤ –∏—Ç–æ–≥–æ–≤–æ–º –¥–µ—Ä–µ–≤–µ.
    -   ‚úÖ `Validation OK`: 100% –∫–ª—é—á–µ–π –Ω–∞ –º–µ—Å—Ç–µ.
    -   ‚ùå `Validation FAILED`: –°–∫—Ä–∏–ø—Ç —É–ø–∞–¥–µ—Ç —Å –æ—à–∏–±–∫–æ–π.

### 4. Unit Testing (–ù–æ–≤–æ–µ)

–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ —Å—á–∏—Ç–∞—Ç—å –∑–∞–¥–∞—á—É –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞–±–æ—Ä unit-—Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –±–∞–∑–æ–≤—ã—Ö —É—Ç–∏–ª–∏—Ç.

```bash
python3 -m pytest tests/unit
```

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ CSV –Ω–µ —Å–ª–æ–º–∞–ª–∏ –ø–∞—Ä—Å–µ—Ä—ã.

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –†–µ–∑—É–ª—å—Ç–∞—Ç–∞

–û—Ç–∫—Ä–æ–π—Ç–µ `data/STRUCTURE.md` –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

-   –°–µ–∫—Ü–∏—é **–°–≤–æ–¥–∫–∞** (–Ω–µ—Ç –ª–∏ Errors/Orphans).
-   **–î–µ—Ä–µ–≤–æ –ö–∞—Ç–µ–≥–æ—Ä–∏–π** (–≤—Å–µ –ª–∏ –ª–µ–≥–ª–æ –≤ –Ω—É–∂–Ω—ã–µ –ø–∞–ø–∫–∏).
-   **–¢–æ–ø-10** (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–º—ã—Ö —á–∞—Å—Ç–æ—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤).

---

## üß© –õ–æ–≥–∏–∫–∞ –ü–∞—Ä—Å–µ—Ä–∞ (`csv_to_readable_md.py`)

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—É–º–Ω—É—é —ç–≤—Ä–∏—Å—Ç–∏–∫—É** –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

1. **L1 / L2 / L3**: –Ø–≤–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã `L1: –ù–∞–∑–≤–∞–Ω–∏–µ`, `L2:...`.
2. **SEO-–§–∏–ª—å—Ç—Ä—ã**: –°—Ç—Ä–æ–∫–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å `SEO-–§–∏–ª—å—Ç—Ä:` –∏–ª–∏ `SEO-Filter:`.
3. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏**: –°—Ç—Ä–æ–∫–∏ `–ö–∞—Ç–µ–≥–æ—Ä–∏—è` / `Category` —Å–æ–∑–¥–∞—é—Ç –∫–ª–∞—Å—Ç–µ—Ä `General (Parent Name)`.
4. **Implicit Clusters (–ù–µ—è–≤–Ω—ã–µ –∫–ª–∞—Å—Ç–µ—Ä—ã)**:
    - –°—Ç—Ä–æ–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∫–ª–∞—Å—Ç–µ—Ä–∞, –µ—Å–ª–∏:
        - –í–æ 2-–π –∫–æ–ª–æ–Ω–∫–µ –µ—Å—Ç—å —Å–ª—ç—à (–Ω–∞–ø—Ä. `3/15`) **–ò–õ–ò**
        - –í–æ 2-–π –∫–æ–ª–æ–Ω–∫–µ —á–∏—Å–ª–æ `>= 5`.
    - _–í–∞–∂–Ω–æ_: –ú–∞–ª–µ–Ω—å–∫–∏–µ –≥—Ä—É–ø–ø—ã (< 5 –∫–ª—é—á–µ–π) –±–µ–∑ —è–≤–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤ —Å—á–∏—Ç–∞—é—Ç—Å—è –ø—Ä–æ—Å—Ç–æ —Å–ø–∏—Å–∫–æ–º –∫–ª—é—á–µ–π –∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è –∫ —Ç–µ–∫—É—â–µ–º—É –∞–∫—Ç–∏–≤–Ω–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É.

---

## üö´ –ß–µ–≥–æ –ù–ï –¥–µ–ª–∞—Ç—å

-   –ù–µ –ø—ã—Ç–∞–π—Ç–µ—Å—å –ø—Ä–∞–≤–∏—Ç—å `STRUCTURE.md` –≤—Ä—É—á–Ω—É—é ‚Äî –æ–Ω –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è.
-   –ù–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∫–ª—é—á–∏ –≤ JSON —Ñ–∞–π–ª—ã –≤ –æ–±—Ö–æ–¥ CSV ‚Äî –æ–Ω–∏ –∑–∞—Ç—Ä—É—Ç—Å—è –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å–∫—Ä–∏–ø—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏).
