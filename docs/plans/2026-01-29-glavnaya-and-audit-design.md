# Главная категория + Аудит распределения ключей — Design

## Цель

1. Создать категорию `glavnaya` для 54 общих ключей (автохимия, автокосметика, детейлинг)
2. Провести ручную проверку всех 52 категорий — убедиться что 323 ключа распределены правильно

---

## Часть 1: Категория glavnaya

### Структура (через /category-init)
```
categories/
├── glavnaya/                     # НОВАЯ L1 категория
│   ├── data/glavnaya_clean.json
│   ├── meta/glavnaya_meta.json
│   ├── content/
│   └── research/
├── aksessuary/
├── moyka-i-eksterer/
├── ...
```

### Создание
Использовать скилл `/category-init glavnaya` для создания полной структуры.

### Ключи для glavnaya (54 шт)
Из review файлов с decision=HOME:
- автохимия (2400)
- автокосметика (1600)
- детейлинг (1300)
- автохимия для авто (720)
- средства для авто (480)
- автомобильная химия (390)
- и другие общие ключи...

### Формат glavnaya_clean.json
```json
{
  "id": "glavnaya",
  "name": "Главная",
  "type": "category",
  "parent_id": null,
  "keywords": [
    {"keyword": "автохимия", "volume": 2400},
    {"keyword": "автокосметика", "volume": 1600},
    {"keyword": "детейлинг", "volume": 1300}
  ],
  "synonyms": [...],
  "entities": ["автохимия", "детейлинг", "уход за авто"],
  "micro_intents": [],
  "source": "manual-import"
}
```

### Обновить STRUCTURE.md
Добавить glavnaya в дерево категорий.

---

## Часть 2: Аудит распределения ключей

### Цель аудита
Проверить что каждый из 323 добавленных ключей:
- Находится в релевантной категории
- Не дублируется в других категориях
- Правильно классифицирован (keyword vs synonym vs meta_only)

### Процесс аудита (выполняет Claude)

**Для каждой категории:**
1. Прочитать `_clean.json`
2. Получить diff — какие ключи добавлены
3. Проверить релевантность каждого ключа категории:
   - Соответствует ли ключ тематике категории?
   - Не должен ли быть в другой категории?
   - Правильно ли классифицирован (keyword/synonym/meta_only)?
4. При проблемах — исправить через Edit
5. Отчёт по категории

### Категории для аудита (все 52)

| Группа | Категорий |
|--------|-----------|
| aksessuary/* | 10 |
| moyka-i-eksterer/* | 17 |
| ukhod-za-intererom/* | 8 |
| zashchitnye-pokrytiya/* | 7 |
| polirovka/* | 6 |
| oborudovanie/* | 2 |
| opt-i-b2b | 1 |
| **Итого** | **52** (после glavnaya — 53) |

### Формат отчёта аудита

Для каждой категории:
```
## {slug}

**Добавлено:** X keywords, Y synonyms

| Ключ | Volume | Тип | Статус |
|------|--------|-----|--------|
| ключ 1 | 1000 | keyword | ✅ OK |
| ключ 2 | 500 | synonym | ⚠️ Переместить в X |
| ключ 3 | 200 | meta_only | ❌ Удалить |

**Итог:** OK / Требует правок
```

---

## Порядок выполнения

### Фаза 1: Создание glavnaya
1. Создать `categories/glavnaya/data/`
2. Извлечь HOME ключи из review файлов
3. Создать `glavnaya_clean.json`
4. Обновить STRUCTURE.md
5. Обновить CLAUDE.md (53 категории)

### Фаза 2: Аудит категорий (6 параллельных воркеров)

| Worker | Группа | Категорий |
|--------|--------|-----------|
| W1 | aksessuary/* | 10 |
| W2 | moyka-i-eksterer/* | 17 |
| W3 | ukhod-za-intererom/* | 8 |
| W4 | zashchitnye-pokrytiya/* | 7 |
| W5 | polirovka/* | 6 |
| W6 | oborudovanie/*, opt-i-b2b, glavnaya | 4 |

Каждый воркер:
1. Читает _clean.json каждой категории своей группы
2. Проверяет релевантность всех ключей
3. Исправляет ошибки через Edit
4. Отчёт: ✅ OK или список исправлений
5. НЕ делает commit

### Фаза 3: Финализация
1. Итоговый отчёт аудита
2. Commit всех изменений
3. Push

---

## Ограничения

- Master CSV НЕ трогаем
- Ручная проверка Claude (без скриптов)
- Claude исправляет явные ошибки, спорные случаи — на усмотрение
