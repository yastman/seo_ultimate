# SEO Guide — Полная документация

## Аудитории

- **Профи-детейлеры:** термины ок, важна эффективность и экономия расхода
- **Обычные покупатели:** простые объяснения, безопасность и результат

---

# Кластеризация

## Когда нужна кластеризация

**Обязательно (создать `_clean.json`):**
>
- >15 keywords в исходном JSON
- ИЛИ есть явные semantic duplicates (даже при <15 ключей)
- ИЛИ primary = secondary (дубль в JSON)

**Не нужна:**

- ≤15 уникальных ключей без дублей (antibitum: 3 ключа, все разные)

## Алгоритм: King of the Hill

1. Сортировка по volume (desc)
2. Группировка по semantic intent
3. Оставить только "king" (highest volume per cluster)
4. **NEW: Проверка релевантности** — убрать ключи из чужих категорий

## Проверка релевантности (ВАЖНО!)

Перед кластеризацией проверь: **все ли ключи относятся к этой категории?**

```
❌ ОШИБКА: ochistiteli-shin содержит "защитное покрытие для дисков"
   → Это категория ochistiteli-diskov, НЕ очистители шин!

✅ ПРАВИЛЬНО: Отметить в clustering_notes.removed_wrong_category
```

Ключи из чужих категорий:

- НЕ включать в _clean.json
- Записать в `clustering_notes.removed_wrong_category`
- Опционально: сообщить о переносе в правильную категорию

## Правила

**Semantic Duplicates → REMOVE:**

```
пена для мойки автомобиля (1300) ─┐
пена для мойки авто (1300)       ├─► KEEP: "активная пена" (720)
активная пена для мойки (1000)   ─┘
```

**Commercial → MERGE:**

```
купить пену для мойки (590) ─┐
купить активную пену (260)  ├─► KEEP один с max volume
```

Commercial modifiers: `купить, цена, заказать, стоимость, в наличии, доставка, недорого`

**Unique Intents → KEEP SEPARATE:**

```
пена для бесконтактной мойки (320) → KEEP (method)
пена для минимойки (70)            → KEEP (equipment)
```

## Intent Types

| Intent     | Пример                 |
| ---------- | ---------------------- |
| main       | активная пена          |
| synonym    | пена для бесконтактной |
| method     | пена для минимойки     |
| equipment  | пена для керхера       |
| commercial | купить активную пену   |

## Output

Сохрани как `{slug}_clean.json`:

```json
{
  "slug": "{slug}",
  "keywords": {
    "primary": [{"keyword": "...", "volume": 720, "cluster": "main"}],
    "secondary": [...],
    "supporting": [...]
  },
  "stats": {"before": 52, "after": 12}
}
```

---

# Research (STEP 3)

Перед написанием контента — собрать данные по категории через web search.

## Обязательные данные для research

| Данные | Зачем | Пример запроса |
|--------|-------|----------------|
| **Что это** | Определение, принцип работы | "{товар} что это принцип работы" |
| **Для чего** | Задачи, типы загрязнений | "{товар} для каких загрязнений применение" |
| **Виды/классификация** | По параметрам (pH, тип, концентрация) | "{товар} виды классификация pH типы" |
| **Инструкция** | Пропорции, время, температура | "{товар} инструкция пропорции разведение" |
| **Совместимость** | С покрытиями, оборудованием | "{товар} совместимость керамика воск PPF" |
| **Ошибки** | Что портит результат/поверхность | "{товар} ошибки повреждение проблемы" |
| **Критерии выбора** | На что смотреть | "{товар} как выбрать на что обратить внимание" |

## Формат сохранения research

Не сохраняем в файл — используем сразу при написании контента.
Ключевые факты интегрируем в buying guide.

---

# Структура Buying Guide

```markdown
# {H1 с primary keyword}

{Answer-first intro: 150 слов = что выбрать + почему}

## Для кого какой {продукт}

**Для домашнего ухода:** {простым языком}
**Для профи-детейлера:** {термины ок}

## Как выбрать

{3-6 сценариев "если… → берите…"}

| Параметр | Значение | Применение |
| -------- | -------- | ---------- |

## Как применять

1. {шаг}
2. {шаг}

## Важно: ошибки

- **{Ошибка}** — {последствия}

## Итог выбора

{2-4 предложения}

## Вопросы и ответы

### {Вопрос}?

{Ответ}
```

---

# Голос и тон

**Пишем как:** опытный детейлер рассказывает другу на парковке.

**Ок:** "Пена стекает за минуту, а грязь на месте? Чаще всего виноваты пропорции."

**Не ок:** "Следует отметить, что применение средства является эффективным…"

---

# Запрещено

## AI-Fluff (BLOCKER)

- "В этой статье…"
- "Давайте разберёмся…"
- "В современном мире…"
- "Следует отметить…"
- "Важно понимать…"

## Generic Content

- "Широкий ассортимент"
- "Лучшие цены"
- "Высокое качество" (без фактов)

## Evergreen Policy

- Бренды в тексте
- Цены в тексте
- Города/ссылки

---

# Meta JSON

```json
{
  "slug": "{slug}",
  "language": "ru",
  "meta": {
    "title": "50-60 chars, primary keyword",
    "description": "140-155 chars, CTA"
  },
  "h1": "{H1 из MD}",
  "keywords_used": ["kw1", "kw2"]
}
```

**Title:** `{Что} для {чего} – {выгода} | Ultimate`
**Description:** `{Что делает}. {Типы}. {CTA}.`

Commercial keywords (купить, цена) — только в Title/Description.

---

# Примеры таблиц

**Активная пена по pH:**

| pH    | Назначение      | Для покрытий   |
| ----- | --------------- | -------------- |
| 7-9   | Легкая грязь    | Керамика, воск |
| 10-12 | Дорожная грязь  | Любые          |
| 11-13 | Реагенты, масло | Голый ЛКП      |

**Чернители:**

| Тип         | Эффект       | Стойкость  |
| ----------- | ------------ | ---------- |
| Водный      | Мат          | 1-2 недели |
| Силиконовый | Глянец       | 3-4 недели |
| Гелевый     | Регулируемый | 2-3 недели |

---

# Semantic Depth

| Keywords | Words   |
| -------- | ------- |
| ≤5       | 300-400 |
| 6-15     | 300-500 |
| 16+      | 400-700 |

---

# Валидация

```bash
python3 scripts/validate_content.py {file} "{keyword}" --mode seo
```

## --mode seo (минимум)

| Check           | Статус  |
| --------------- | ------- |
| H1 + keyword    | BLOCKER |
| Primary в intro | BLOCKER |
| Blacklist       | BLOCKER |

## --mode quality (полная)

| Check          | Статус  |
| -------------- | ------- |
| H1 + keyword   | BLOCKER |
| Structure (H2) | BLOCKER |
| Coverage       | WARNING |
| Water/Nausea   | WARNING |

Exit codes: 0=PASS, 1=WARNING, 2=FAIL
